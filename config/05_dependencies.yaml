---
# A push can have multiple dependencies. A dependency is triggered when the parent push finished execution.
# The child push will get the output of it's parent as input. By that it is possible to combine multiple pushes
# in a chained fashion.

# This example yields the string 'Hello World' every second. The first push gets 'Hello' and just returns it.
# The second one gets 'World' and just returns it. Both child pushes transform 'Hello'/'World' to a char array by the
# power of the selector.

- name: dependencies
  pull:
    plugin: pnp.plugins.pull.simple.Repeat
    args:
      wait: 1
      repeat: "Hello World"
  push:
    - plugin: pnp.plugins.push.simple.Nop
      selector: "payload.split(' ')[0]"
      deps:
        plugin: pnp.plugins.push.simple.Echo
        selector: "list(payload)"
    - plugin: pnp.plugins.push.simple.Nop
      selector: "payload.split(' ')[1]"
      deps:
        plugin: pnp.plugins.push.simple.Echo
        selector: "list(payload)"
